<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Live Seafood - Dodie's</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: #000;
  color: #fff;
  padding: 20px;
  min-height: 100vh;
}

.container {
  max-width: 1100px;
  margin: 0 auto;
}

.header {
  text-align: center;
  margin-bottom: 40px;
}

.logo {
  font-size: 72px;
  margin-bottom: 16px;
}

h1 {
  font-size: 48px;
  color: #DC143C;
  margin-bottom: 8px;
  font-weight: 800;
}

.subtitle {
  color: #999;
  font-size: 18px;
}

.nav {
  text-align: center;
  margin-bottom: 32px;
}

.nav a {
  display: inline-block;
  margin: 0 10px;
  padding: 12px 24px;
  background: #1a1a1a;
  color: #fff;
  text-decoration: none;
  border-radius: 8px;
  border: 2px solid #DC143C;
  font-weight: 600;
}

.nav a:hover {
  background: #DC143C;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 24px;
}

.card {
  background: #1a1a1a;
  border: 2px solid #333;
  border-radius: 12px;
  padding: 24px;
  transition: all 0.3s;
}

.card:hover {
  border-color: #DC143C;
  transform: translateY(-4px);
}

.card-icon {
  font-size: 56px;
  margin-bottom: 16px;
}

.card-name {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 16px;
}

.status {
  padding: 12px;
  border-radius: 8px;
  text-align: center;
  font-weight: 700;
  margin-bottom: 16px;
  font-size: 14px;
  text-transform: uppercase;
}

.status-AVAILABLE {
  background: rgba(34, 139, 34, 0.2);
  color: #90EE90;
  border: 2px solid #228B22;
}

.status-LIMITED {
  background: rgba(255, 165, 0, 0.2);
  color: #FFA500;
  border: 2px solid #FF8C00;
}

.status-OUT {
  background: rgba(220, 20, 60, 0.2);
  color: #FF6B6B;
  border: 2px solid #DC143C;
}

.price {
  font-size: 32px;
  font-weight: 800;
  color: #FFD700;
  text-align: center;
}

.loading {
  text-align: center;
  padding: 60px;
  color: #666;
  font-size: 18px;
}

@media (max-width: 768px) {
  h1 { font-size: 36px; }
  .grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <div class="logo">ðŸ¦ž</div>
    <h1>DODIE'S CAJUN DINER</h1>
    <div class="subtitle">Live Seafood Prices</div>
  </div>

  <div class="nav">
    <a href="index.html">Home</a>
    <a href="inventory.html">Inventory</a>
    <a href="guest.html">Join Waitlist</a>
    <a href="host.html">Host View</a>
  </div>

  <div id="content" class="loading">Loading inventory...</div>
</div>

<script>
const API = 'https://script.google.com/macros/s/AKfycbzJoD0PyD3Y0tMSUl4g5UWHenFSlVDuMx_vDMAc9LjHKgObGhZ-D3HBPJeDkOZR34YLEA/exec';

const ITEMS = {
  'Crawfish': 'ðŸ¦ž',
  'Chargrilled Oysters': 'ðŸ¦ª',
  'Raw Oysters': 'ðŸ¦ª',
  'Snow Crab': 'ðŸ¦€',
  'Peel & Eat Shrimp': 'ðŸ¦'
};

async function load() {
  try {
    const res = await fetch(`${API}?action=getInventory`);
    const json = await res.json();
    
    if (!json.success) throw new Error(json.message);
    
    const items = json.data || [];
    
    const html = Object.keys(ITEMS).map(name => {
      const item = items.find(x => x.item === name) || {};
      const status = item.status || 'OUT';
      const price = item.price ? `$${Number(item.price).toFixed(2)}` : 'â€”';
      
      return `
        <div class="card">
          <div class="card-icon">${ITEMS[name]}</div>
          <div class="card-name">${name}</div>
          <div class="status status-${status}">${status}</div>
          <div class="price">${price}</div>
        </div>
      `;
    }).join('');
    
    document.getElementById('content').innerHTML = `<div class="grid">${html}</div>`;
  } catch (err) {
    document.getElementById('content').innerHTML = `<div class="loading">Error: ${err.message}</div>`;
  }
}

load();
setInterval(load, 30000);
</script>

</body>
</html>
